"use strict";(self.webpackChunk_playcanvas_blog=self.webpackChunk_playcanvas_blog||[]).push([[33246],{69244:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>o});var t=n(74848),a=n(28453);const i={authors:"donovan",slug:"compressing-gaussian-splats",title:"Compressing Gaussian Splats",tags:["gaussian-splats","compression","supersplat"]},r=void 0,l={permalink:"/compressing-gaussian-splats",editUrl:"https://github.com/playcanvas/blog/tree/main/blog/2023-12-05-compressing-gaussian-splats.md",source:"@site/blog/2023-12-05-compressing-gaussian-splats.md",title:"Compressing Gaussian Splats",description:"Introduction",date:"2023-12-05T00:00:00.000Z",tags:[{label:"gaussian-splats",permalink:"/tags/gaussian-splats"},{label:"compression",permalink:"/tags/compression"},{label:"supersplat",permalink:"/tags/supersplat"}],readingTime:3.61,hasTruncateMarker:!1,authors:[{name:"Donovan Hutchence",title:"Staff Software Engineer",url:"https://twitter.com/slimbuck7",imageURL:"https://pbs.twimg.com/profile_images/1727369755231727616/ukKVbC9b_400x400.png",key:"donovan"}],frontMatter:{authors:"donovan",slug:"compressing-gaussian-splats",title:"Compressing Gaussian Splats",tags:["gaussian-splats","compression","supersplat"]},unlisted:!1,prevItem:{title:"Massive Upgrade for the PlayCanvas Developer Site",permalink:"/massive-upgrade-for-the-playcanvas-developer-site"},nextItem:{title:"Boost Your Efficiency: Editor gets Support for AVIF and WebP",permalink:"/avif-webp-land-in-editor"}},d={authorsImageUrls:[void 0]},o=[{value:"Introduction",id:"introduction",level:3},{value:"What is a Splat?",id:"what-is-a-splat",level:3},{value:"Engine Support",id:"engine-support",level:3},{value:"PLY Format",id:"ply-format",level:3},{value:"Compressed PLY Format",id:"compressed-ply-format",level:3},{value:"Do It Yourself",id:"do-it-yourself",level:3},{value:"Summary and Future",id:"summary-and-future",level:3},{value:"References",id:"references",level:3}];function c(e){const s={a:"a",code:"code",em:"em",h3:"h3",img:"img",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h3,{id:"introduction",children:"Introduction"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.a,{href:"https://repo-sam.inria.fr/fungraph/3d-gaussian-splatting/",children:(0,t.jsx)(s.strong,{children:"3D Gaussian Splatting"})})," is a new method for digitizing and rendering real world objects. With gaussian splatting, you can digitize a scene from a few photos using services like ",(0,t.jsx)(s.a,{href:"https://lumalabs.ai/",children:"Luma Labs"})," or ",(0,t.jsx)(s.a,{href:"https://poly.cam/",children:"Polycam"}),". These services take the set of photos and generate a 3d Gaussian Splat scene in ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/PLY_(file_format)",children:"PLY format"}),"."]}),"\n",(0,t.jsx)(s.p,{children:"For example, this is a Gaussian Splat scene rendered in PlayCanvas."}),"\n",(0,t.jsx)("div",{className:"iframe-container",children:(0,t.jsx)("iframe",{loading:"lazy",src:"https://playcanv.as/p/69cnpevQ/",title:"360 lookaround camera",webkitallowfullscreen:"true",mozallowfullscreen:"true",allow:"autoplay",allowfullscreen:"true",allowvr:"",scrolling:"no",frameborder:"0"})}),"\n",(0,t.jsx)(s.h3,{id:"what-is-a-splat",children:"What is a Splat?"}),"\n",(0,t.jsxs)(s.p,{children:["Gaussian Splat Scenes are not made up of polygons and textures. Instead, they are made up of many (up to millions) of individual, unconnected blobs called ",(0,t.jsx)(s.em,{children:"splats"}),". A splat is just a particle in space with size, orientation, color and opacity."]}),"\n",(0,t.jsx)(s.p,{children:"Below you can see a single brown splat selected. The splat bounding box shows its orientation and size:"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Splat Example",src:n(70797).A+"",width:"900",height:"600"})}),"\n",(0,t.jsx)(s.p,{children:"The gaussian part of the name comes from the shape of splat itself: the splat opacity has a gaussian falloff from its center to its edge."}),"\n",(0,t.jsx)(s.h3,{id:"engine-support",children:"Engine Support"}),"\n",(0,t.jsx)(s.p,{children:"The PlayCanvas team has been adding support to the engine for loading and rendering Gaussian Splat PLY files:"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://playcanvas.github.io/#/loaders/splat-many",children:(0,t.jsx)(s.img,{alt:"Engine Example",src:n(97243).A+"",width:"800",height:"676"})})}),"\n",(0,t.jsxs)(s.p,{children:["Since the resulting files are often messy and require cleaning, we released ",(0,t.jsx)(s.a,{href:"https://playcanvas.com/super-splat",children:"SuperSplat"}),", a tool for cleaning and processing gaussian splat PLY files:"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://playcanvas.com/super-splat?load=https://code.playcanvas.com/viewer/guitar-cleaned.ply",children:(0,t.jsx)(s.img,{alt:"SuperSplat Example",src:n(13255).A+"",width:"800",height:"676"})})}),"\n",(0,t.jsx)(s.h3,{id:"ply-format",children:"PLY Format"}),"\n",(0,t.jsx)(s.p,{children:"However, the default gaussian splat PLY format as exported by training tools is large."}),"\n",(0,t.jsxs)(s.p,{children:["This is because the uncompressed format stores a large amount of data ",(0,t.jsx)(s.em,{children:"per splat"}),":"]}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Name"}),(0,t.jsx)(s.th,{children:"Data Format"}),(0,t.jsx)(s.th,{children:"Bytes"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Position"}),(0,t.jsx)(s.td,{children:"3 x float"}),(0,t.jsx)(s.td,{children:"12"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Orientation"}),(0,t.jsx)(s.td,{children:"4 x float"}),(0,t.jsx)(s.td,{children:"16"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Scale"}),(0,t.jsx)(s.td,{children:"3 x float"}),(0,t.jsx)(s.td,{children:"12"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Spherical harmonics / color"}),(0,t.jsx)(s.td,{children:"48 x float"}),(0,t.jsx)(s.td,{children:"192"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Total"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{children:"232"})]})]})]}),"\n",(0,t.jsxs)(s.p,{children:["For example, the original ",(0,t.jsx)(s.code,{children:"guitar.ply"})," scene file takes ",(0,t.jsx)(s.strong,{children:"132.8 MB"})," (",(0,t.jsx)(s.strong,{children:"32 MB"})," excluding spherical harmonic data)."]}),"\n",(0,t.jsx)(s.h3,{id:"compressed-ply-format",children:"Compressed PLY Format"}),"\n",(0,t.jsxs)(s.p,{children:["So we introduced a ",(0,t.jsx)(s.em,{children:"compressed PLY"})," format for use in runtime applications. The compressed PLY file format ignores the unused spherical harmonic data and stores the rest of the elements in quantized integers."]}),"\n",(0,t.jsx)(s.p,{children:"The format can be summarized as follows:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Split the scene into chunks of 256 splats"}),"\n",(0,t.jsx)(s.li,{children:"For each chunk, store the min and max (x, y, z) for position and scale in floating point"}),"\n",(0,t.jsx)(s.li,{children:"For each splat in the chunk, store a normalized and quantized value for position and scale (relative to chunk extents) and orientation and color"}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["This data layout results in the following data ",(0,t.jsx)(s.em,{children:"per chunk"}),":"]}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Name"}),(0,t.jsx)(s.th,{children:"Data Format"}),(0,t.jsx)(s.th,{children:"Bytes"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Position bound"}),(0,t.jsx)(s.td,{children:"6 x float"}),(0,t.jsx)(s.td,{children:"24"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Scale bound"}),(0,t.jsx)(s.td,{children:"6 x float"}),(0,t.jsx)(s.td,{children:"24"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Total"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{children:"48"})]})]})]}),"\n",(0,t.jsxs)(s.p,{children:["And the following data ",(0,t.jsx)(s.em,{children:"per splat"}),":"]}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Name"}),(0,t.jsx)(s.th,{children:"Data Format"}),(0,t.jsx)(s.th,{children:"Bytes"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Position"}),(0,t.jsx)(s.td,{children:"uint32 (11, 10, 11)"}),(0,t.jsx)(s.td,{children:"4"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Orientation"}),(0,t.jsx)(s.td,{children:"uint32 (2, 10, 10, 10)"}),(0,t.jsx)(s.td,{children:"4"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Scale"}),(0,t.jsx)(s.td,{children:"uint32 (11, 10, 11)"}),(0,t.jsx)(s.td,{children:"4"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Color"}),(0,t.jsx)(s.td,{children:"uint32 (8, 8, 8, 8)"}),(0,t.jsx)(s.td,{children:"4"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Total"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{children:"16"})]})]})]}),"\n",(0,t.jsxs)(s.p,{children:["As a result, the compressed version of ",(0,t.jsx)(s.code,{children:"guitar.ply"})," takes only ",(0,t.jsx)(s.strong,{children:"8.7 MB"}),"."]}),"\n",(0,t.jsx)(s.h3,{id:"do-it-yourself",children:"Do It Yourself"}),"\n",(0,t.jsxs)(s.p,{children:["The easiest way to generate a compressed PLY file yourself is using the ",(0,t.jsx)(s.a,{href:"https://playcanvas.com/super-splat",children:"SuperSplat tool"}),". Load the PLY file into SuperSplat and export it again using the 'Compressed Ply File' option:"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://playcanvas.com/super-splat",children:(0,t.jsx)(s.img,{alt:"SuperSplat Export",src:n(69026).A+"",width:"340",height:"188"})})}),"\n",(0,t.jsxs)(s.p,{children:["If you are interested in the file format specifics, see ",(0,t.jsx)(s.a,{href:"https://github.com/playcanvas/engine/blob/a86bd8be0cfd4e39e9ba5e5466acb6875ab9906e/extras/splat/splat-data.js#L257",children:"this code"})," which demonstrates how to decompress the file data."]}),"\n",(0,t.jsxs)(s.p,{children:["See ",(0,t.jsx)(s.a,{href:"https://playcanvas.com/project/1165904/overview/gaussiansplatdemo",children:"this editor project"})," for an example of loading and rendering a compressed gaussian splat PLY file. Or you can ",(0,t.jsx)(s.a,{href:"https://playcanv.as/p/69cnpevQ/",children:"run it here"}),"."]}),"\n",(0,t.jsx)(s.h3,{id:"summary-and-future",children:"Summary and Future"}),"\n",(0,t.jsx)(s.p,{children:"We have introduced a new compressed PLY format for gaussian splatting which is roughly 4x smaller than uncompressed data and can be used in realtime applications."}),"\n",(0,t.jsx)(s.p,{children:"In future we hope to:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"store splats hierarchically for optimized rendering and culling"}),"\n",(0,t.jsx)(s.li,{children:"implement realtime splat LOD"}),"\n",(0,t.jsx)(s.li,{children:"test skinning and animation of gaussian splats"}),"\n",(0,t.jsx)(s.li,{children:"further compress gaussian splat data"}),"\n",(0,t.jsx)(s.li,{children:"optimize WebGPU rendering"}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"references",children:"References"}),"\n",(0,t.jsxs)(s.p,{children:["The compressed format is largely based on the fine work of Aras Pranckevi\u010dius and his ",(0,t.jsx)(s.a,{href:"https://aras-p.info/",children:"blog posts"}),"."]})]})}function h(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},97243:(e,s,n)=>{n.d(s,{A:()=>t});const t=n.p+"assets/images/gaussian-splat-example-c0776ca8356842a5c19f9d4d41172f77.gif"},70797:(e,s,n)=>{n.d(s,{A:()=>t});const t=n.p+"assets/images/splat-example-6b4b739f779347c38f34dc3d592486e9.gif"},13255:(e,s,n)=>{n.d(s,{A:()=>t});const t=n.p+"assets/images/super-splat-example-8005c919009f33017c7e2fbc204f1218.gif"},69026:(e,s,n)=>{n.d(s,{A:()=>t});const t=n.p+"assets/images/super-splat-export-453f97f86e805eb24288953fe590058a.png"},28453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>l});var t=n(96540);const a={},i=t.createContext(a);function r(e){const s=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);