"use strict";(self.webpackChunk_playcanvas_blog=self.webpackChunk_playcanvas_blog||[]).push([[13396],{64064:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>r,toc:()=>l});var a=n(74848),s=n(28453);const o={authors:"dave",slug:"playhack-november-adding-tank-controls",title:"PLAYHACK November - Adding Tank Controls"},i=void 0,r={permalink:"/playhack-november-adding-tank-controls",editUrl:"https://github.com/playcanvas/blog/tree/main/blog/2014-11-04-playhack-november-adding-tank-controls.md",source:"@site/blog/2014-11-04-playhack-november-adding-tank-controls.md",title:"PLAYHACK November - Adding Tank Controls",description:"PLAYHACKclear",date:"2014-11-04T00:00:00.000Z",tags:[],readingTime:2.345,hasTruncateMarker:!1,authors:[{name:"Dave Evans",title:"CTO",url:"https://twitter.com/daredevildave",imageURL:"https://pbs.twimg.com/profile_images/1271233580430053376/-OHHBJ2Z_400x400.jpg",key:"dave"}],frontMatter:{authors:"dave",slug:"playhack-november-adding-tank-controls",title:"PLAYHACK November - Adding Tank Controls"},unlisted:!1,prevItem:{title:"PlayCanvas Referrals: Just a little Thank You",permalink:"/playcanvas-referrals-just-a-little-thank-you"},nextItem:{title:"PLAYHACK - Make a game, get featured",permalink:"/playhack-make-a-game-get-featured"}},c={authorsImageUrls:[void 0]},l=[{value:"Tank Controls",id:"tank-controls",level:2},{value:"Setting up the Physics",id:"setting-up-the-physics",level:3},{value:"Keyboard input",id:"keyboard-input",level:3},{value:"PLAYHACK",id:"playhack",level:3}];function h(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:(0,a.jsx)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(85470).A+"",children:(0,a.jsx)(t.img,{alt:"PLAYHACK_clear",src:n(48184).A+"",width:"603",height:"218"})})}),"\n",(0,a.jsxs)(t.p,{children:["As this is our first PLAYHACK we thought it would be sensible to start with a few tips and\xa0tutorials to get you going. We'll follow up with more of these throughout the week. Don't forget, these are just examples. You can make ",(0,a.jsx)(t.strong,{children:"any"})," game you like."]}),"\n",(0,a.jsx)(t.h2,{id:"tank-controls",children:"Tank Controls"}),"\n",(0,a.jsx)(t.p,{children:"Our first snippet of code is going to\xa0get you controlling your tank. This will give you an little introduction into the\xa0PlayCanvas physics system as well as reading keyboard input."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(40941).A+"",children:(0,a.jsx)(t.img,{alt:"tank",src:n(88443).A+"",width:"800",height:"800"})})}),"\n",(0,a.jsx)(t.h3,{id:"setting-up-the-physics",children:"Setting up the Physics"}),"\n",(0,a.jsx)(t.p,{children:"The pack you started with has a tank entity set up. To add physics we need to add a rigidbody and a collision component. It's not quite that simple though, as we need to make sure that geometry lines up in the center of the collision body."}),"\n",(0,a.jsx)(t.p,{children:"Here is one way to set up the hierarchy:"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(95812).A+"",children:(0,a.jsx)(t.img,{alt:"PLAYHACK_hierarchy",src:n(22178).A+"",width:"237",height:"229"})})}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.strong,{children:"Tank"}),"\xa0entity is setup with rigidbody and collision components. The ",(0,a.jsx)(t.strong,{children:"Geometry"})," entity is a container for the models and the light. We can position the ",(0,a.jsx)(t.strong,{children:"Geometry"})," entity so that it lines up in the center of our collision."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(62414).A+"",children:(0,a.jsx)(t.img,{alt:"PLAYHACK_attributes",src:n(56464).A+"",width:"262",height:"535"})})}),"\n",(0,a.jsxs)(t.p,{children:["Here is the attribute panel for the ",(0,a.jsx)(t.strong,{children:"Tank"})," entity. You \xa0can see we've set the collision shape to be a sphere, the rigidbody is dynamic and we've\xa0set angular factor to [0, 1, 0] which means the sphere can only rotate around the y-axis."]}),"\n",(0,a.jsx)(t.p,{children:"We've also\xa0added a ground collision box so the tank doesn't fall through the floor.\xa0After that, the only thing left to do is read the keyboard input."}),"\n",(0,a.jsx)(t.h3,{id:"keyboard-input",children:"Keyboard input"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"pc.script.create('tankcontrols', function (context) {\n    // Creates a new Tankcontrols instance\n    var Tankcontrols = function (entity) {\n        this.entity = entity;\n        this.force = new pc.Vec3();\n    };\n\n    Tankcontrols.prototype = {\n        // Called once after all resources are loaded\n        initialize: function () {\n        },\n\n        // Called every frame, dt is time in seconds since last update\n        update: function (dt) {\n            if (context.keyboard.isPressed(pc.input.KEY_LEFT)) {\n                this.entity.rigidbody.applyTorque(0, 1, 0);\n            }\n            if (context.keyboard.isPressed(pc.input.KEY_RIGHT)) {\n                this.entity.rigidbody.applyTorque(0, -1, 0);\n            }\n            if (context.keyboard.isPressed(pc.input.KEY_UP)) {\n                this.force.copy(this.entity.forward).scale(10);\n                this.entity.rigidbody.applyForce(this.force);\n            }\n            if (context.keyboard.isPressed(pc.input.KEY_DOWN)) {\n                this.force.copy(this.entity.forward).scale(-10);\n                this.entity.rigidbody.applyForce(this.force);\n            }\n\n        }\n    };\n\n    return Tankcontrols;\n});\n"})}),"\n",(0,a.jsxs)(t.p,{children:["This script is attached to the\xa0",(0,a.jsx)(t.strong,{children:"Tank"})," entity. It's pretty self-explanatory. Each\xa0frame, ",(0,a.jsx)(t.code,{children:"update()"})," is called. This function checks to see if the any of the arrow keys on the keyboard have been pressed. If they have a force or torque is applied to the rigidbody attached to the entity."]}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.a,{href:"https://playcanvas.com/dave/playhack-nov/designer/bootstrap?e=d3e2d116-641c-11e4-9aee-12313b0a5ec6&repository=true",children:"Here is the Pack"})," with this already set up for you to try. Run the pack and use the arrow keys to control the tank."]}),"\n",(0,a.jsx)(t.h3,{id:"playhack",children:"PLAYHACK"}),"\n",(0,a.jsx)(t.p,{children:"PLAYHACK is our monthly game jam. We'll give you a starting point and you have a month to build a game. The winner is featured on our frontpage and wins fame and glory everlasting!"}),"\n",(0,a.jsx)(t.p,{children:"Not started work on your PLAYHACK game yet? What are you waiting for go fork this project!"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.a,{href:"https://playcanvas.com/project/331485/overview/playhack-nov-14",children:(0,a.jsx)(t.img,{alt:"button",src:n(80249).A+"",width:"675",height:"136"})})})]})}function d(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},62414:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/files/PLAYHACK_attributes-1bec95934707cca572c1156bfe3a14c2.jpg"},85470:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/files/PLAYHACK_clear-3f3ef472028ecb4c6957a651eb750e15.png"},95812:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/files/PLAYHACK_hierarchy-546bde79adb43fcc0f27c1136dec009b.jpg"},40941:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/files/tank-fc486c6a4bf11d04afa9e44af5889eea.jpg"},56464:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/PLAYHACK_attributes-1bec95934707cca572c1156bfe3a14c2.jpg"},48184:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/PLAYHACK_clear-3f3ef472028ecb4c6957a651eb750e15.png"},22178:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/PLAYHACK_hierarchy-546bde79adb43fcc0f27c1136dec009b.jpg"},80249:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/button-1-19f515d919358108275e0c2286422210.png"},88443:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/tank-fc486c6a4bf11d04afa9e44af5889eea.jpg"},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>r});var a=n(96540);const s={},o=a.createContext(s);function i(e){const t=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(o.Provider,{value:t},e.children)}}}]);