"use strict";(self.webpackChunk_playcanvas_blog=self.webpackChunk_playcanvas_blog||[]).push([[83491],{76736:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>r,toc:()=>h});var s=n(74848),i=n(28453);const o={authors:"dave",slug:"playhack-november-turrets-and-shooting-bullets",title:"PLAYHACK November - Turrets and shooting bullets"},a=void 0,r={permalink:"/playhack-november-turrets-and-shooting-bullets",editUrl:"https://github.com/playcanvas/blog/tree/main/blog/2014-11-06-playhack-november-turrets-and-shooting-bullets.md",source:"@site/blog/2014-11-06-playhack-november-turrets-and-shooting-bullets.md",title:"PLAYHACK November - Turrets and shooting bullets",description:"As this is our first PLAYHACK we thought it would be sensible to start with a few tips and\xa0tutorials to get you going. We\u2019ll follow up with more of these throughout the week. Don\u2019t forget, these are just examples. You can make any game you like.",date:"2014-11-06T00:00:00.000Z",tags:[],readingTime:2.48,hasTruncateMarker:!1,authors:[{name:"Dave Evans",title:"CTO",url:"https://twitter.com/daredevildave",imageURL:"https://pbs.twimg.com/profile_images/1271233580430053376/-OHHBJ2Z_400x400.jpg",key:"dave"}],frontMatter:{authors:"dave",slug:"playhack-november-turrets-and-shooting-bullets",title:"PLAYHACK November - Turrets and shooting bullets"},unlisted:!1,prevItem:{title:"3D Asset Store Propsplanet upgrades from Unity to PlayCanvas",permalink:"/3d-asset-store-propsplanet-upgrades-from-unity-to-playcanvas"},nextItem:{title:"PLAYHACK November - Camera types",permalink:"/playhack-november-camera-types"}},l={authorsImageUrls:[void 0]},h=[{value:"PLAYHACK_designer",id:"playhack_designer",level:3},{value:"Rotating Turret",id:"rotating-turret",level:3},{value:"Shooting Bullets",id:"shooting-bullets",level:3},{value:"<code>Entity.clone()</code>",id:"entityclone",level:4},{value:"Enabling and Disabling Entities",id:"enabling-and-disabling-entities",level:4},{value:"Target Practice",id:"target-practice",level:3},{value:"PLAYHACK",id:"playhack",level:3}];function c(e){const t={a:"a",code:"code",h3:"h3",h4:"h4",img:"img",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.p,{children:["As this is our first PLAYHACK we thought it would be sensible to start with a few tips and\xa0tutorials to get you going. We\u2019ll follow up with more of these throughout the week. Don\u2019t forget, these are just examples. You can make ",(0,s.jsx)(t.strong,{children:"any"})," game you like."]}),"\n",(0,s.jsx)(t.h3,{id:"playhack_designer",children:(0,s.jsx)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(62882).A+"",children:(0,s.jsx)(t.img,{alt:"PLAYHACK_designer",src:n(74360).A+"",width:"1179",height:"603"})})}),"\n",(0,s.jsx)(t.h3,{id:"rotating-turret",children:"Rotating Turret"}),"\n",(0,s.jsxs)(t.p,{children:["In the previous blog posts we\xa0set up keyboard controls\xa0to move the tank\xa0by apply forces to the rigidbody. Now we going to add separate controls to\xa0rotate the tanks turret. You\xa0try ",(0,s.jsx)(t.a,{href:"https://playcanvas.com/project/331485/overview/playhack-nov-14",children:"this project"})," for yourself by running ",(0,s.jsx)(t.a,{href:"https://playcanvas.com/editor/scene/342714",children:"this scene"}),"."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'initialize: function () {\n    this.turret = this.entity.findByName("Tank_gun_turret");\n    this.bullet = context.root.findByName("Bullet");\n    this.barrel = context.root.findByName("Barrel");\n},\n\nupdate: function (dt) {\n    // Rotate the turret left and right using A and D\n    if (context.keyboard.isPressed(pc.input.KEY_A)) {\n        this.turret.rotate(0, this.speed * dt, 0);\n    } else if(context.keyboard.isPressed(pc.input.KEY_D)) {\n        this.turret.rotate(0, -this.speed * dt, 0);\n    }\n\n    if (context.keyboard.wasPressed(pc.input.KEY_S)) {\n        this.shoot();\n    }\n},\n'})}),"\n",(0,s.jsxs)(t.p,{children:["This is the code in ",(0,s.jsx)(t.strong,{children:"turretcontrols.js"}),". It's very simple. In the initialize function we find the Entity called ",(0,s.jsx)(t.strong,{children:"Tank_gun_turret"}),". This Entity is the\xa0separate model for the gun turret. Then each frame we check to see if the A or D key is pressed and we rotate the turret to the left or right using the ",(0,s.jsx)(t.code,{children:"rotate()"})," method on the Entity."]}),"\n",(0,s.jsx)(t.h3,{id:"shooting-bullets",children:"Shooting Bullets"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"shoot: function () {\n    var bullet = this.bullet.clone();\n    context.root.addChild(bullet);\n    bullet.setPosition(this.barrel.getPosition());\n    bullet.enabled = true;\n\n    this.force = new pc.Vec3();\n    this.force.copy(this.turret.forward);\n    this.force.scale(-this.impulse);\n\n    bullet.rigidbody.applyImpulse(this.force);\n}\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Take a look at the ",(0,s.jsx)(t.code,{children:"shoot()"})," function\xa0above. This is called when the player presses the S key. It introduces a few different concepts:"]}),"\n",(0,s.jsx)(t.h4,{id:"entityclone",children:(0,s.jsx)(t.code,{children:"Entity.clone()"})}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"clone()"}),"\xa0method on Entities creates a complete copy of the Entity and its components. When you clone an\xa0Entity it is created but not added into the scene hierarchy so you have to call the\xa0",(0,s.jsx)(t.code,{children:"addChild()"})," method and add it to the parent of your choice. In this case, we're just adding it to the root."]}),"\n",(0,s.jsx)(t.h4,{id:"enabling-and-disabling-entities",children:"Enabling and Disabling Entities"}),"\n",(0,s.jsxs)(t.p,{children:["The bullet Entity we are cloning from is\xa0",(0,s.jsx)(t.strong,{children:"disabled"})," in the Designer because we don't want this extra bullet in\xa0the scene.\xa0After we have cloned the Entity we want to enabled the bullet which means that the model component is enabled (it start's rendering) and the rigidbody is enabled (it starts simulating/colliding)."]}),"\n",(0,s.jsx)(t.p,{children:"To fire the bullet, we clone it, add it into the hierarchy and set it's position to the location of the gun barrel entity.\xa0After we've enabled the bullet, we apply an impulse to kick it off in the direction of the turret."}),"\n",(0,s.jsx)(t.h3,{id:"target-practice",children:"Target Practice"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(91758).A+"",children:(0,s.jsx)(t.img,{alt:"PLAYHACK_boxes",src:n(98868).A+"",width:"700",height:"600"})})}),"\n",(0,s.jsxs)(t.p,{children:["Finally we've just added some boxes for target practice. The boxes are simply Entities with a dynamic rigidbody and a collision component. Don't forget you\xa0try ",(0,s.jsx)(t.a,{href:"https://playcanvas.com/project/331849/overview/playhacknov",children:"this project"})," for yourself by running ",(0,s.jsx)(t.a,{href:"https://playcanvas.com/editor/scene/343656",children:"this pack"}),"."]}),"\n",(0,s.jsx)(t.h3,{id:"playhack",children:"PLAYHACK"}),"\n",(0,s.jsx)(t.p,{children:"PLAYHACK is our monthly game jam. We\u2019ll give you a starting point and you have a month to build a game. The winner is featured on our frontpage and wins fame and glory everlasting!"}),"\n",(0,s.jsx)(t.p,{children:"Not started work on your PLAYHACK game yet? What are you waiting for go fork this project!"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.a,{href:"https://playcanvas.com/project/331485/overview/playhack-nov-14",children:(0,s.jsx)(t.img,{alt:"button",src:n(80249).A+"",width:"675",height:"136"})})})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},91758:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/files/PLAYHACK_boxes-d1d489798142e6bc350c5de6d855b9fe.jpg"},62882:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/files/PLAYHACK_designer-0192095151a97bbf1ce86f081f5b033a.jpg"},98868:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/PLAYHACK_boxes-d1d489798142e6bc350c5de6d855b9fe.jpg"},74360:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/PLAYHACK_designer-0192095151a97bbf1ce86f081f5b033a.jpg"},80249:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/button-1-19f515d919358108275e0c2286422210.png"},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>r});var s=n(96540);const i={},o=s.createContext(i);function a(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);